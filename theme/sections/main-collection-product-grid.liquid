{% assign tags = collection.all_tags %}
{% assign tagsSize = tags | size %}

<div class="collection-hero">
    <h1>{{ section.settings.collections_header }}</h1>
    <p>{{ section.settings.collections_copy }}</p>
</div>
<div class="collection-grid mw">

    <div class="filters">
        {% for block in section.blocks %}
            {% assign thisCollection = block.settings.collection %}
            <a class="prefetch-us pink-btn filter blue{% if collection.handle == thisCollection.handle %} active{% endif %}" href="{{ thisCollection.handle }}"><span>{{ block.settings.collection_name }}</span></a>
        {% endfor %}
    </div>

    <div class="filters-wrapper">
        <div class="filters-mobile drawer replace-label" data-at="767">
            <div class="filters-bg">
                <button class="label">
                    <p class="current-label">Filter By
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 14"><g filter="url(#filter0_d_1470_11015)"><path fill="#F5FDFF" fill-rule="evenodd" d="M3.263 1.4a1.75 1.75 0 0 1 2.474 0L10.5 6.163 15.263 1.4a1.75 1.75 0 1 1 2.474 2.475L10.5 11.113 3.263 3.875a1.75 1.75 0 0 1 0-2.475Z" clip-rule="evenodd"/><path stroke="#00142D" stroke-width=".8" d="m10.5 5.597-4.48-4.48a2.15 2.15 0 1 0-3.04 3.041l7.237 7.237.283.283.283-.283 7.237-7.237a2.15 2.15 0 0 0-3.04-3.04l-4.48 4.48Z"/></g></svg>
                        </span>
                    </p>
                    <div class="close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <g filter="url(#filter0_d_1885_11880)">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M6.97631 6.97631C8.27806 5.67456 10.3886 5.67456 11.6904 6.97631L16 11.286L20.3096 6.97631C21.6114 5.67456 23.7219 5.67456 25.0237 6.97631C26.3254 8.27806 26.3254 10.3886 25.0237 11.6904L20.714 16L25.0236 20.3096C26.3254 21.6113 26.3254 23.7219 25.0236 25.0236C23.7219 26.3254 21.6113 26.3254 20.3096 25.0236L16 20.714L11.6904 25.0237C10.3886 26.3254 8.27806 26.3254 6.97631 25.0237C5.67456 23.7219 5.67456 21.6114 6.97631 20.3096L11.286 16L6.97631 11.6904C5.67456 10.3886 5.67456 8.27806 6.97631 6.97631Z" fill="#F5FDFF"/>
                                <path d="M12.0439 6.62276C10.5469 5.12575 8.11977 5.12575 6.62276 6.62276C5.12575 8.11977 5.12575 10.5469 6.62276 12.0439L10.5788 16L6.62276 19.9561C5.12575 21.4531 5.12575 23.8802 6.62276 25.3772C8.11977 26.8743 10.5469 26.8743 12.0439 25.3772L16 21.4212L19.956 25.3772C21.453 26.8742 23.8802 26.8742 25.3772 25.3772C26.8742 23.8802 26.8742 21.453 25.3772 19.956L21.4212 16L25.3772 12.0439C26.8743 10.5469 26.8743 8.11977 25.3772 6.62276C23.8802 5.12575 21.4531 5.12575 19.9561 6.62276L16 10.5788L12.0439 6.62276Z" stroke="#00142D"/>
                            </g>
                            <defs>
                                <filter id="filter0_d_1885_11880" x="4" y="5" width="23" height="23" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                    <feOffset dx="-1" dy="1"/>
                                    <feComposite in2="hardAlpha" operator="out"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0.0784314 0 0 0 0 0.176471 0 0 0 1 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1885_11880"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1885_11880" result="shape"/>
                                </filter>
                            </defs>
                        </svg>
                    </div>
                </button>

                <div class="drawer-items">
                    {% for block in section.blocks %}
                        {% assign thisCollection = block.settings.collection %}
                        <a class="filter-mobile" href="{{ thisCollection.handle }}"><span>{{ block.settings.collection_name }}</span></a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>



    <div class="grid mw">
        {% for thisProduct in collection.products %}
            <a href="{{ thisProduct.url }}" class="card-wrapper{% for tag in thisProduct.tags %} {{ tag | handle }}{% endfor %}">
                <span>
                    <svg class="svg-left" xmlns="http://www.w3.org/2000/svg" width="67" height="49" viewBox="0 0 67 49" fill="none">
                        <path d="M45.8518 1.81937C45.7323 1.78886 45.6089 1.77665 45.4858 1.78317L23.2581 2.95928C22.611 2.99352 22.1039 3.52816 22.1039 4.17612V6.0786L11.598 3.00656C11.327 2.9273 11.0368 2.94465 10.7771 3.05562L2.52113 6.58397C2.01419 6.80062 1.71586 7.33065 1.79366 7.87643L7.19182 45.7474C7.26845 46.2851 7.69164 46.7071 8.2295 46.7823C8.76735 46.8575 9.29003 46.5676 9.51114 46.0716L20.2099 22.0692L26.8408 23.7066C27.0466 23.7574 27.2621 23.7536 27.466 23.6957L50.6463 17.1094C50.7503 17.0799 50.8499 17.0366 50.9425 16.9808L64.5966 8.748C65.0173 8.49434 65.2446 8.01289 65.173 7.5269C65.1014 7.0409 64.745 6.64542 64.269 6.52385L45.8518 1.81937Z" fill="white" stroke="#00142D" stroke-width="2.43707" stroke-linejoin="round"/>
                    </svg>
                    <svg class="svg-right" xmlns="http://www.w3.org/2000/svg" width="67" height="49" viewBox="0 0 67 49" fill="none">
                        <path d="M21.1155 1.81937C21.235 1.78886 21.3584 1.77665 21.4815 1.78317L43.7092 2.95928C44.3562 2.99352 44.8633 3.52816 44.8633 4.17612V6.0786L55.3693 3.00656C55.6403 2.9273 55.9305 2.94465 56.1901 3.05562L64.4462 6.58397C64.9531 6.80062 65.2514 7.33065 65.1736 7.87643L59.7755 45.7474C59.6988 46.2851 59.2756 46.7071 58.7378 46.7823C58.1999 46.8575 57.6773 46.5676 57.4561 46.0716L46.7574 22.0692L40.1265 23.7066C39.9207 23.7574 39.7052 23.7536 39.5013 23.6957L16.321 17.1094C16.217 17.0799 16.1174 17.0366 16.0248 16.9808L2.37064 8.748C1.94996 8.49434 1.72272 8.01289 1.79431 7.5269C1.8659 7.0409 2.22231 6.64542 2.69826 6.52385L21.1155 1.81937Z" fill="white" stroke="#00142D" stroke-width="2.43707" stroke-linejoin="round"/>
                    </svg>
                    {% if product.metafields.accentuate.color_tag %}
                        <div class="tag" style="background: {{ product.metafields.accentuate.color_tag_color }};">{{ product.metafields.accentuate.color_tag }}</div>
                    {% endif %}
                    <div class="block">
                         <div class="img-wrapper">
                            <img class="preload-critical"{% if thisProduct.images[0].alt %} alt="{{ thisProduct.images[0].alt }}"{% endif %} data-preload-desktop="https:{{ thisProduct.images[0] | img_url: '700x', format: 'jpg' }}" data-preload-mobile="https:{{ thisProduct.images[0] | img_url: '550x', format: 'jpg' }}">
                            {% if thisProduct.images[1] %}<img class="preload-critical"{% if thisProduct.images[1].alt %} alt="{{ thisProduct.images[1].alt }}"{% endif %} data-preload-desktop="https:{{ thisProduct.images[1] | img_url: '700x', format: 'jpg' }}">{% endif %}
                        </div>
                        <div class="block-inner">
                            <p class="type">{{ thisProduct.type }}</p>
                            <p class="name">{{ thisProduct.title }}</p>
                            <div class="price">
                                <p>
                                    {{ thisProduct.price | money }}
                                    <strong>
                                        {% if thisProduct.compare_at_price %}{{ thisProduct.compare_at_price | money }}{% endif %}
                                    </strong>
                                </p>
                            </div>
                            <button class="pink-btn {% unless thisProduct.available %} disabled{% endunless %}">
                                <span class="in-stock">
                                    Shop now
                                    <img src="https://cdn.shopify.com/s/files/1/0649/5646/5395/files/Vector.png?v=1691970255">
                                </span>
                                <span class="out-of-stock">Sold out</span>
                            </button>
                        </div>
                    </div>
                </span>
            </a>
        {% endfor %}
        <div class="card-wrapper dummy"></div>
        <div class="card-wrapper dummy"></div>
    </div>
</div>

{% schema %}
    {
        "name": "Collection Categories",
        "tag": "section",
        "class": "collection-wrapper mw tabs-inside c-24",
        "settings": [
            {
                "id": "collections_header",
                "type": "text",
                "label": "Collections Header"
            },
            {
                "id": "collections_copy",
                "type": "text",
                "label": "Collections Copy"
            }
        ],
      "blocks": [
        {
          "name": "Collection",
          "type": "collection",
          "settings": [
            {
              "id": "collection",
              "type": "collection",
              "label": "Collection"
            },
            {
              "id": "collection_name",
              "type": "text",
              "label": "Collection Name"
            }
          ]
        }
      ]
    }
{% endschema %}
